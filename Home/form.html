<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>formulario</title>
    <link rel="stylesheet" href="form.css">
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="globals.css">
</head>
<body>
    <div class="form-container">
        <div id="question-number">Pergunta 1 de 2</div>
        <h2 id="question-text">Formulário de permissões</h2>

        <div id="options-container" class="options-grid">
        </div>

        <div class="navigation">
            <button id="prev-btn" onclick="prevQuestion()">Voltar</button>
            <button id="next-btn" onclick="nextQuestion()">Próxima</button>
        </div>
    </div>

    <script>
    const questions = [
        {
            question: "Você é mãe solo?",
            options: ["Sim", "Não"],
            type: "single" 
        },
        {
            question: "Você gostaria de ter acesso a:",
            options: ["Consultorias com psicólogos", "Interações no fórum", "Artigos informativos", "Calendário de eventos"],
            type: "multiple" 
        }
    ];

    let currentQuestion = 0;
    const selections = [];

    function loadQuestion() {
        const q = questions[currentQuestion];
        document.getElementById("question-number").textContent = `Pergunta ${currentQuestion + 1} de ${questions.length}`;
        document.getElementById("question-text").textContent = q.question;

        const container = document.getElementById("options-container");
        container.innerHTML = "";

        q.options.forEach(option => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.textContent = option;

            btn.onclick = () => {
                if (q.type === "single") {
                    document.querySelectorAll(".option-btn").forEach(b => b.classList.remove("selected"));
                    btn.classList.add("selected");
                } else {
                    btn.classList.toggle("selected");
                }
            };

            container.appendChild(btn);
        });

        if (q.options.length === 4) {
            container.style.gridTemplateColumns = "repeat(2, 1fr)";
        } else {
            container.style.gridTemplateColumns = "repeat(auto-fit, minmax(180px, 1fr))";
        }

        document.getElementById("prev-btn").style.display = currentQuestion === 0 ? "none" : "inline-block";
        document.getElementById("next-btn").textContent = currentQuestion === questions.length - 1 ? "Terminar" : "Próxima";
    }

    function nextQuestion() {
        saveSelections();
        if (currentQuestion < questions.length - 1) {
            currentQuestion++;
            loadQuestion();
        } else {
            saveSelections();
            console.log("Respostas:", selections);
            window.location.href = "header.html";
        }
    }

    function prevQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            loadQuestion();
        }
    }

    function saveSelections() {
        const selected = Array.from(document.querySelectorAll(".option-btn.selected")).map(btn => btn.textContent);
        selections[currentQuestion] = selected;
    }

    // inicia
    loadQuestion();
</script>

</body>
</html>
